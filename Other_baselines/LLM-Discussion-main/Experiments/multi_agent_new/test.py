import re
import json


def extract_response(content):  # we补
    # lines = content.split('\n')
    # uses = [line.strip() for line in lines if line.strip() and re.match(r"^\d+\.", line)]
    # uses = [use[use.find('.') + 2:] for use in uses]
    temp_res = content.replace('\n', '').replace(' ', '')
    # 正则表达式模式来匹配名字和解释
    pattern = r'"名字":\s*"([^"]+)",\s*"解释":\s*"([^"]+)"'
    # 使用findall方法提取所有匹配
    matches = re.findall(pattern, temp_res)
    # 将结果转为字典并合并到一个列表中
    uses = [{"名字": name, "解释": explanation} for name, explanation in matches]

    if len(uses) == 0:
        # 提取 JSON 部分
        json_strings = re.findall(r'```json\n(.*?)\n```', content, re.DOTALL)
        for json_str in json_strings:
            try:
                data = json.loads(json_str)  # 解析 JSON
                if "名字" in data and "解释" in data:
                    uses.append({"名字": data["名字"], "解释": data["解释"]})
            except json.JSONDecodeError:
                continue  # 忽略解析失败的部分

    return uses

a='```json\n{\n  "名字": "伏昭蘅",\n  "解释": {\n    "文化内涵": "《楚辞》\'昭质如日月\'的光明意象与《本草纲目》杜蘅\'令人不忘\'的特性结合，形成\'昭德蘅芳\'的传世家训。昭蘅二字既象征圣诞破晓的出生时刻，又寓意\'以德馨系亲情\'的纽带作用。",\n    "五行八字": "己酉年土金旺，冬月子时水寒极。\'昭\'（日部火）破阴寒，\'蘅\'（艹头木）疏土生火，形成水生木→木生火的能量升级，完美平衡命理。",\n    "生肖适配": "鸡年喜\'日\'司晨、\'艹\'啄食；猴年宜攀援植物（蘅含\'行\'部），一名兼容双生肖特质。",\n    "父母期待": "\'昭\'为光明指引，\'蘅\'是美德传承，组合成\'以光明系连血脉，以芬芳滋养家门\'的期许。",\n    "音形义": "声调伏(2)-昭(1)-蘅(2)如圣诞钟声，9+19画形成疏密韵律，兼具东西方美学。"\n  }\n}\n```\n\n```json\n{\n  "名字": "伏晏宁",\n  "解释": {\n    "文化内涵": "《诗经》\'言笑晏晏\'的温馨夜话与《尚书》\'万邦咸宁\'的太平理想结合，\'晏宁\'谐音\'宴安\'，双关圣诞夜宴与平安祝福。",\n    "五行八字": "\'晏\'（日部火）暖冬月子时，\'宁\'（宀部火）双火融冰，形成火生土→土生金的良性循环，强化家庭凝聚力。",\n    "生肖适配": "鸡归\'宀\'巢，猴栖\'日\'下，\'晏\'字\'安\'部直指平安夜诞辰。",\n    "父母期待": "\'晏\'为欢聚，\'宁\'是长久，组合成\'以欢宴滋养亲情，以安宁延续家风\'的实践路径。",\n    "音形义": "10画+5画的黄金比例，去声+阳平的音韵对比，简约现代。"\n  }\n}\n```\n\n```json\n{\n  "名字": "伏令纾",\n  "解释": {\n    "文化内涵": "《尚书》\'令德令望\'的德治传统与《诗经》\'纾我百忧\'的情感智慧融合，形成\'以德令行，以爱纾困\'的现代治家理念。",\n    "五行八字": "\'令\'（人部火）暖局生土，\'纾\'（纟部金）泄土生水，构成火→土→金→水的相生闭环，精准调候。",\n    "生肖适配": "鸡冠似\'令\'字人部，猴爪如\'纾\'字纟部，\'予\'部含奉献精神。",\n    "父母期待": "\'令\'为家风规范，\'纾\'是矛盾调解，组合成\'刚柔并济\'的亲情维系法则。",\n    "音形义": "5画+7画的二进制简洁度，去声+阴平的摩尔斯电码式节奏。"\n  }\n}\n```\n\n```json\n{\n  "名字": "伏攸宁",\n  "解释": {\n    "文化内涵": "《诗经》\'君子攸宁\'的古训与存在主义\'栖居\'哲学对话，构建\'在时间中守护空间\'的现代亲情观，\'攸宁\'谐音\'悠宁\'。",\n    "五行八字": "\'攸\'（亻部土）镇地基，\'宁\'（宀部火）暖寒局，形成\'火生土→土制水\'的堤坝式命理结构。",\n    "生肖适配": "猴栖\'宀\'如归巢，鸡立\'亻\'似报晓，\'丨\'部象征圣诞树。",\n    "父母期待": "\'攸\'为持久，\'宁\'是安定，组合成\'在流动时光中守护家庭港湾\'的寓意。",\n    "音形义": "7画+5画的黄金分割，阴平+阳平的余弦波音效。"\n  }\n}\n```\n\n```json\n{\n  "名字": "伏清晏",\n  "解释": {\n    "文化内涵": "《诗经》\'清扬婉兮\'与圣诞颂歌《Silent Night》东西合璧，\'清晏\'谐音\'庆宴\'，寄寓\'海晏河清\'的家国情怀。",\n    "五行八字": "\'清\'（氵部水）润燥土，\'晏\'（日部火）化寒冰，形成水→木→火的能量跃迁。",\n    "生肖适配": "鸡司晨喜\'日\'，猴戏水乐\'氵\'，\'青\'部暗合圣诞色系。",\n    "父母期待": "\'清\'为溶解隔阂的溶剂，\'晏\'是加速融合的催化剂。",\n    "音形义": "11画+10画的流水线型结构，阴平+去声的瀑布音律。"\n  }\n}\n```\n\n```json\n{\n  "名字": "伏雪蘅",\n  "解释": {\n    "文化内涵": "柳宗元\'孤舟蓑笠翁\'的雪境与《楚辞》\'被石兰兮带杜蘅\'的香草结合，构建\'雪中蘅芜\'的坚韧美德意象。",\n    "五行八字": "\'雪\'（雨部水）应冬令，\'蘅\'（艹头木）疏土生火，形成水→木→火的圣诞能量转换。",\n    "生肖适配": "鸡喜\'雨\'得润，猴乐\'艹\'攀援，\'行\'部添灵动。",\n    "父母期待": "雪喻纯洁坚韧，蘅表德馨远播，象征女儿如雪中芳草系连家族。",\n    "音形义": "11画+19画的错落结构，上声+阳平如踏雪寻芳。"\n  }\n}\n```\n\n```json\n{\n  "名字": "伏昭慈",\n  "解释": {\n    "文化内涵": "《礼记》\'昭明有融\'的文明之光与《韩诗外传》\'慈母之道\'的伦理结合，形成\'昭德慈心\'的圣诞家训。",\n    "五行八字": "\'昭\'（日部火）破阴寒，\'慈\'（心部火）双火暖局，烈火融冰之势平衡冬月水旺。",\n    "生肖适配": "鸡喜\'日\'司晨、\'心\'慧性，猴宜\'心\'智慧。",\n    "父母期待": "\'昭\'为光明指引，\'慈\'是博爱践行，组合成圣诞\'光明与仁爱\'的精神内核。",\n    "音形义": "9画+13画的稳重大方，阴平+阳平温润如玉。"\n  }\n}\n```'
extract_response(a)
